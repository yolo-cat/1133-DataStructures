# 股票資料處理系統開發任務清單

## 📋 專案總覽
- **專案名稱**: 股票資料處理系統
- **主要功能**: 資料產生器 + 股票排行榜系統  
- **技術棧**: Java + Swing + External Merge Sort
- **資料規模**: 2000個交易日 × 18000檔股票 ≈ 2.7GB

---

## 🚀 Phase 1: 基礎架構搭建 (1-2天)

### ✅ 專案結構設置
- [ ] 建立專案目錄結構
  - [ ] 建立 `src/model/` 目錄
  - [ ] 建立 `src/service/` 目錄  
  - [ ] 建立 `src/gui/` 目錄
  - [ ] 建立 `src/controller/` 目錄
  - [ ] 建立 `src/util/` 目錄
  - [ ] 建立 `data/` 目錄 (資料檔案)
  - [ ] 建立 `temp/` 目錄 (臨時檔案)

### 📊 核心資料模型
- [ ] 實作 `StockRecord.java`
  - [ ] 定義所有屬性 (股票代碼、名稱、日期等)
  - [ ] 實作 getter/setter 方法
  - [ ] 實作 toString() 方法 (CSV格式輸出)
  - [ ] 實作 fromString() 方法 (CSV格式解析)
  - [ ] 實作資料驗證邏輯
  - [ ] 加入 Comparable 介面支援排序

### 🛠️ 工具類別
- [ ] 實作 `Constants.java`
  - [ ] 定義檔案路徑常數
  - [ ] 定義記憶體限制常數
  - [ ] 定義資料格式常數
- [ ] 實作 `SortField.java` 枚舉
  - [ ] 定義 VOLUME 排序
  - [ ] 定義 AMOUNT 排序
  - [ ] 加入 Comparator 支援

### 🧪 基礎測試
- [ ] 建立 `StockRecord` 單元測試
- [ ] 測試資料驗證邏輯
- [ ] 測試 CSV 轉換功能

---

## 📈 Phase 2: 資料產生器開發 (2-3天)

### 🏭 核心服務層
- [ ] 實作 `ChineseNameGenerator.java`
  - [ ] 定義中文字詞典 (前綴、行業、後綴)
  - [ ] 實作隨機組合邏輯
  - [ ] 確保生成2-6個中文字的名稱
  - [ ] 避免重複名稱生成
  
- [ ] 實作 `DataGenerator.java`
  - [ ] 實作股票代碼生成 (000001-999999)
  - [ ] 實作交易日期序列生成 (排除週末假日)
  - [ ] 實作成交量/金額生成邏輯
  - [ ] 實作單筆最大/最小金額邏輯一致性檢查
  - [ ] 實作批次檔案寫入功能
  - [ ] 加入進度回調機制

### 🖥️ GUI 介面
- [ ] 實作 `DataGeneratorGUI.java`
  - [ ] 設計主視窗布局
  - [ ] 加入參數設定面板 (資料量、日期範圍)
  - [ ] 加入進度條顯示
  - [ ] 加入檔案儲存路徑選擇
  - [ ] 加入開始/停止/重置按鈕
  - [ ] 加入統計資訊顯示 (已生成筆數、檔案大小等)

### 🎮 控制器層
- [ ] 實作 `DataGeneratorController.java`
  - [ ] 連接 GUI 與 Service 層
  - [ ] 實作多執行緒資料生成 (避免 GUI 凍結)
  - [ ] 實作進度更新邏輯
  - [ ] 實作錯誤處理與使用者提示

### 🧪 測試驗證
- [ ] 測試中文名稱生成器
- [ ] 測試小量資料生成正確性
- [ ] 測試資料邏輯一致性
- [ ] 測試檔案寫入效能

---

## 🔍 Phase 3: 排序系統開發 (3-4天)

### 📁 檔案管理服務
- [ ] 實作 `FileManager.java`
  - [ ] 實作 CSV 檔案讀取 (使用 Iterator 模式)
  - [ ] 實作 CSV 檔案寫入 (批次寫入)
  - [ ] 實作臨時檔案管理
  - [ ] 實作檔案清理功能
  - [ ] 加入檔案格式驗證

### ⚡ 核心排序引擎
- [ ] 實作 `ExternalMergeSort.java`
  - [ ] 實作第一階段：資料分塊與內部排序
    - [ ] 設定記憶體限制 (10萬筆記錄)
    - [ ] 實作分塊讀取邏輯
    - [ ] 使用 Arrays.sort() 進行內部排序
    - [ ] 寫入排序後的臨時檔案
  - [ ] 實作第二階段：多路歸併合併
    - [ ] 使用 PriorityQueue 實作多路歸併
    - [ ] 實作檔案指標管理
    - [ ] 優化記憶體使用
  - [ ] 實作前N筆結果提取
  - [ ] 加入排序進度回調

### 🖥️ 排序 GUI
- [ ] 實作 `StockRankingGUI.java`
  - [ ] 設計主視窗布局
  - [ ] 加入檔案選擇器
  - [ ] 加入排序欄位選擇 (RadioButton: 成交量/成交金額)
  - [ ] 實作結果表格 (JTable 顯示前15筆)
  - [ ] 加入排序按鈕與進度指示器
  - [ ] 加入結果匯出功能

### 🎮 排序控制器
- [ ] 實作 `SortingController.java`
  - [ ] 連接 GUI 與排序服務
  - [ ] 實作多執行緒排序 (避免 GUI 凍結)
  - [ ] 實作進度更新與狀態管理
  - [ ] 實作錯誤處理

### 🧪 排序系統測試
- [ ] 測試小檔案排序正確性
- [ ] 測試記憶體限制功能
- [ ] 測試臨時檔案清理
- [ ] 測試大檔案排序效能

---

## 🔧 Phase 4: 系統整合與優化 (1-2天)

### 🔗 系統整合
- [ ] 整合資料生成器與排序系統
- [ ] 建立主程式入口點
- [ ] 實作系統配置管理
- [ ] 統一錯誤處理機制
- [ ] 統一日誌記錄

### ⚡ 效能優化
- [ ] 記憶體使用量優化
  - [ ] 調整 chunk size 參數
  - [ ] 實作記憶體監控
  - [ ] 優化物件創建與回收
- [ ] IO 效能優化
  - [ ] 使用 BufferedReader/Writer
  - [ ] 調整緩衝區大小
  - [ ] 實作批次讀寫
- [ ] 演算法優化
  - [ ] 調整歸併路數
  - [ ] 優化比較器效能

### 🧪 完整測試
- [ ] **單元測試**
  - [ ] StockRecord 類別測試
  - [ ] 中文名稱生成器測試
  - [ ] 排序演算法正確性測試
- [ ] **整合測試**
  - [ ] 完整資料流程測試 (生成→排序→顯示)
  - [ ] GUI 功能完整性測試
  - [ ] 異常情況處理測試
- [ ] **效能測試**
  - [ ] 大檔案生成效能基準
  - [ ] 排序演算法效能基準
  - [ ] 記憶體使用量監控
  - [ ] 不同資料量的擴展性測試

### 🐛 Bug 修復與調優
- [ ] 修復發現的功能性 Bug
- [ ] 修復效能問題
- [ ] 優化使用者體驗
- [ ] 完善錯誤提示訊息

---

## 📚 文檔與交付

### 📄 技術文檔
- [ ] 完善程式碼註解
- [ ] 更新 Design.md (如有架構調整)
- [ ] 撰寫 README.md 使用說明
- [ ] 撰寫 API 文檔

### 📸 作業交付
- [ ] 準備 GUI 截圖
  - [ ] 資料生成器截圖
  - [ ] 排序結果顯示截圖
  - [ ] 進度顯示截圖
- [ ] 整理原始碼
- [ ] 準備示範資料
- [ ] 撰寫使用說明

---

## ⏰ 時程管控

| 階段 | 預計時間 | 關鍵里程碑 | 風險點 |
|------|----------|------------|--------|
| Phase 1 | 1-2天 | 基礎架構完成 | 專案結構設計 |
| Phase 2 | 2-3天 | 資料生成器可用 | 中文名稱生成邏輯 |
| Phase 3 | 3-4天 | 排序系統完成 | External Sort 實作複雜度 |
| Phase 4 | 1-2天 | 系統整合完成 | 效能調優與大檔案測試 |

**總計預估**: 7-11天

---

## 🚨 風險與注意事項

### ⚠️ 技術風險
- [ ] **記憶體管理**: 大檔案處理時的記憶體溢出風險
- [ ] **IO 效能**: 2.7GB 檔案讀寫效能問題
- [ ] **排序正確性**: External Merge Sort 實作複雜度

### 💡 優化建議
- [ ] 先實作小規模版本驗證邏輯正確性
- [ ] 分階段測試，避免最後集中發現問題
- [ ] 保留效能監控點，方便後續調優

### 🎯 驗收標準
- [ ] 能成功生成 2.7GB 測試資料
- [ ] 能在合理時間內完成排序 (< 10分鐘)
- [ ] GUI 操作流暢，無凍結現象
- [ ] 排序結果正確，前15筆顯示正常

---

## 📝 每日進度記錄

### Day 1: ___/___
- [ ] 完成項目: 
- [ ] 遇到問題:
- [ ] 明日計畫:

### Day 2: ___/___
- [ ] 完成項目:
- [ ] 遇到問題:
- [ ] 明日計畫:

*(繼續記錄...)*
